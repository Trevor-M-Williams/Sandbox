<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        ::-webkit-scrollbar {
            display: none;
        }
        body {
            height: 200vh;
        }
        .section {
            position: fixed;
            height: 100vh;
            width: 100%;
            transition: all 1500ms ease;
            overflow: hidden;
        }
        h1 {
            font-size: 120px;
        }
    </style>
</head>
<body>
    <div class="section">
        <h1>1</h1>
    </div>
    <div class="section">
        <h1>2</h1>
    </div>
    <div class="section">
        <h1>3</h1>
    </div>

    <script>
         window.onbeforeunload = () => {
            window.scroll(0, 0);
            setTimeout(() => document.body.style.overflowY = 'auto', 50)
        }

        let index = 0;
        let scrolling = false;
        let scrollPosition = 0;

        let sections = document.querySelectorAll('.section');
        let n = sections.length;
        let bgs = ['lightblue', 'lightgreen', 'lightyellow'];

        sections.forEach((section, i) => {
            section.style.zIndex = n - i;
            section.style.background = bgs[i];
        })

        window.addEventListener('scroll', handleScroll)

        function handleScroll() {
            if (!scrolling) {
                scrolling = true;
                document.body.style.overflowY = 'hidden';

                let inc = upOrDown();
                lastIndex = index;
                index += inc;

                if (index === 0) scrollPosition = 0;
                else if (index === sections.length - 1) scrollPosition = 100000;
                else scrollPosition = 100;

                applyTransform();

                window.scroll(0, scrollPosition);

                console.log(scrollPosition);

                setTimeout(() => {
                    scrolling = false;
                    document.body.style.overflowY = 'auto';
                    let scrollY = Math.round(window.scrollY * 100) / 100;
                    scrollPosition = scrollY;
                    console.log(scrollPosition);
                }, 1500);
            }
        }

        function applyTransform() {
            sections.forEach((section, i) => {
                if (i < index) section.style.height = 0;
                else section.style.height = '100vh';
            })
        }

        function upOrDown() {
            console.log(scrollPosition);
            if (window.scrollY > scrollPosition) return 1
            else return -1
        }
    </script>
</body>
</html>